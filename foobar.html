<!DOCTYPE HTML PUBLIC>
<HTML>
	<HEAD>
		<title>THE FOOBAR</title>
		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
		<script src="jQuery.knob.js"></script>
		<link rel="stylesheet" type="text/css" href="foobar.css">


		<style>	

		</style>
		
	</HEAD>
	<BODY>
		<div class="top" style="margin-top: 5%;">
			<p1>THE FOOBAR</p1>
		</div>

		<div style="margin-top: 8%; font-size: 300%;">

			<p>What would you like to drink?</p>

		</div>
		<div style="height:420px;width:100%">
	        <div style="position:relative;width:400px;margin:auto">
	        	<div style="position:absolute;left:0px;top:0px">
	                <input class="dial1" data-min="0" data-max="100" data-step="10" data-bgColor="#333" data-fgColor="#FF4500" data-displayInput=false data-width="400" data-height="400" data-thickness=".23">
	            </div>
	            <div style="position:absolute;left:50px;top:50px">
	                <input class="dial2" data-min="0" data-max="100" data-step="10" data-bgColor="#333" data-fgColor="#ffec03" data-displayInput=false data-width="300" data-height="300" data-thickness=".3">
	            </div>
	            <div style="position:absolute;left:100px;top:100px">
	                <input class="dial3" data-min="0" data-max="100" data-step="10" data-bgColor="#333" data-fgcolor="#3399FF" data-displayInput=false data-width="200" data-height="200" data-thickness=".45">
	            </div>
	            <div style="position:absolute;left:150px;top:150px">
	                <input class="dial4" data-min="0" data-max="100" data-step="10" data-bgColor="#333" data-fgColor="#66FF33" data-displayInput=false data-width="100" data-height="100" data-thickness=".45">
	            </div>
	        </div>
	    </div>

		<div id = "ing1Bar">
			<span id="ing1Vol"></span>
			<span> parts </span>
			<span id="ing1Dis"></span>
		</div>

		<div id = "ing2Bar">
			<span id="ing2Vol"></span>
			<span> parts </span>
			<span id="ing2Dis"></span>
		</div>

		<div id = "ing3Bar">
			<span id="ing3Vol"></span>
			<span> parts </span>
			<span id="ing3Dis"></span>
		</div>

		<div id = "ing4Bar">
			<span id="ing4Vol"></span>
			<span> parts </span>
			<span id="ing4Dis"></span>
		</div>


		<div ><a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"><input type="image" src="Media\mix.png" id="control" onclick ="mixHandler()"/></a></div>

		<div id="panel">
			<p>
				<form id="form" onsubmit="return false;">
			    	Core ID : <input class="input" type="text" id="input1"/>
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input1', 'zero');" id="submit"/> </a>
				</form>
			</p>

			<p>
				<form id="form" onsubmit="return false;">
			    	Access Token : <input class="input" type="text" id="input2" />
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input2', 'one');" id="submit"/> </a>
				</form>
			</p>
			<p>
				<form id="form" onsubmit="return false;">
			    	Ingredient 1 : <input class="input" type="text" id="input3" />
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input3', 'two');" id="submit"/> </a>
				</form>
			</p>

			<p>
				<form id="form" onsubmit="return false;">
			    	Ingredient 2 : <input class="input" type="text" id="input4" />
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input4', 'three');" id="submit"/> </a>
				</form>
			</p>
			<p>
				<form id="form" onsubmit="return false;">
			    	Ingredient 3 : <input class="input" type="text" id="input5" />
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input5', 'four');" id="submit"/> </a>
				</form>
			</p>

			<p>
				<form id="form" onsubmit="return false;">
			    	Ingredient 4 : <input class="input" type="text" id="input6" />
			    	<a onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"> <input type="image" src="Media\submit.png" onclick="inputHandler('input6', 'five');" id="submit"/> </a>
				</form>
			</p>
		</div>

		<p class="slide"><a href="#" class="btn-slide" onmouseout="this.style.opacity=1;" onmouseover="this.style.opacity=0.6;"><input type="image" src="Media\setup.png"/></a></p>

			<script>

				var ml1 = 0;
				var ml2 = 0;
				var ml3 = 0;
				var ml4 = 0;

				var inputElems = {};
				var inputElemsStr = {};					
				inputElemsStr['zero'] = "core_ID";
				inputElemsStr['one'] = "accessKey";
				inputElemsStr['two'] = "ing1Dis";
				inputElemsStr['three'] = "ing2Dis";
				inputElemsStr['four'] = "ing3Dis";
				inputElemsStr['five'] = "ing4Dis";

				function inputHandler(id, key) {
		    		inputElems[key] = $("#" + id).val();

		    		alert(inputElems[key]);
		    		console.log(inputElems[key]);
		    		console.log(inputElems[key] + " = " + id);

		    		document.getElementById(inputElemsStr[key]).innerHTML = inputElems[key];
				};

				function mixHandler(){

					var total = ml1 + ml2 + ml3 + ml4;
					if (total > 400){
						alert("2 Turnt...try a smaller drink");
					} else {
						var stringVal1 = ml1*.6;
						var stringVal2 = ml2*.6;
						var stringVal3 = ml3*.6;
						var stringVal4 = ml4*.6;
						var concatStr = "" + stringVal1 + "," + stringVal2 + "," + stringVal3 + "," + stringVal4;
						sendApiRequest(concatStr);
					}

				}

				function sendApiRequest(v) {
					var coreCall = "https://api.spark.io/v1/devices/" + inputElems['zero'] + "/mix";
		    		console.log('foo ' + v);
		    		$.post(coreCall, {access_token: inputElems['one'], arg: v});
				};

				$(document).ready(function(){

					$(".btn-slide").click(function(){
						$("#panel").slideToggle("slow");
						$(this).toggleClass("active"); return false;
					});
	
				});

				$(".dial1").knob({ 
									'release' : function (v) { 
		    													ml1 = v;
		    													console.log(ml1);
		    													document.getElementById("ing1Vol").innerHTML = ml1/20;
		    					}
				});

				$(".dial2").knob({ 
									'release' : function (v) { 
		    													ml2 = v;
		    													console.log(ml2);
		    													document.getElementById("ing2Vol").innerHTML = ml2/20;
		    					}
				});

				$(".dial3").knob({ 
									'release' : function (v) { 
		    													ml3 = v;
		    													console.log(ml3);
		    													document.getElementById("ing3Vol").innerHTML = ml3/20;
		    					}
				});

				$(".dial4").knob({ 
									'release' : function (v) { 
		    													ml4 = v;
		    													console.log(ml4);
		    													document.getElementById("ing4Vol").innerHTML = ml4/20;
		    					}
				});

				document.getElementById("ing1Vol").innerHTML = ml1/20;
				document.getElementById("ing2Vol").innerHTML = ml1/20;
				document.getElementById("ing3Vol").innerHTML = ml1/20;
				document.getElementById("ing4Vol").innerHTML = ml1/20;
				
			</script>	
	</BODY>
</HTML>